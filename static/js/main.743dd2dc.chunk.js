(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(46)},38:function(e,t,n){},43:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),l=n.n(c),o=n(19),i=(n(38),n(12)),u=n(4),s=n(5),p=n(7),h=n(6),m=n(2),d=n(17),b=n(15);n(43);var E=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={email:"",senha:"",button:!0},e.handleChange=e.handleChange.bind(Object(b.a)(e)),e.handleClick=e.handleClick.bind(Object(b.a)(e)),e}return Object(s.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState(Object(d.a)({},a,r),(function(){var e=t.state,n=e.email,a=e.senha;/^[\w0-9.]+@\w+\.com$/.test(n)&&a.length>=6?t.setState({button:!1}):t.setState({button:!0})}))}},{key:"handleClick",value:function(){(0,this.props.btnClicked)(this.state.email)}},{key:"render",value:function(){var e=this.state.button;return r.a.createElement("form",null,r.a.createElement("h1",null,"Login"),r.a.createElement("label",{htmlFor:"input-email"},"Email:",r.a.createElement("input",{"data-testid":"email-input",type:"text",name:"email",id:"input-email",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"input-password"},"Senha:",r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"senha",id:"input-password",onChange:this.handleChange})),r.a.createElement(o.b,{to:"/carteira"},r.a.createElement("button",{type:"button",disabled:e,onClick:this.handleClick},"Entrar")))}}]),n}(r.a.Component),f=Object(i.b)(null,(function(e){return{btnClicked:function(t){return e({type:"SET_EMAIL",payload:t})}}}))(E),v=n(3),j=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"handleSum",value:function(){return this.props.expenses.reduce((function(e,t){var n=t.value,a=t.currency,r=t.exchangeRates;return e+n*Object.values(r).find((function(e){return e.code===a})).ask}),0)}},{key:"render",value:function(){var e=this.props.emailGot;return r.a.createElement("header",null,r.a.createElement("span",{"data-testid":"email-field"},"Ol\xe1,",e),r.a.createElement("span",{"data-testid":"total-field"},"Despesa Total: R$",this.handleSum()),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))}}]),n}(r.a.Component),O=Object(i.b)((function(e){return{emailGot:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses,exchangeRates:e.wallet.exchangeRates}}),null)(j),y=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"input-valor"},"Valor",r.a.createElement("input",{type:"number",id:"input-valor",name:"value",onChange:e})),r.a.createElement("label",{htmlFor:"input-descri\xe7\xe3o"},"Descri\xe7\xe3o",r.a.createElement("input",{type:"text",id:"input-descri\xe7\xe3o",name:"description",onChange:e})))}}]),n}(r.a.Component),g=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.currencies,a=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"input-moeda"},"Moeda",r.a.createElement("select",{id:"input-moeda",name:"currency",onChange:t},n.map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("label",{htmlFor:"input-pagamento"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"input-pagamento",name:"method",onChange:t},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"input-categoria"},"Tag",r.a.createElement("select",{id:"input-categoria",name:"tag",onChange:t},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade"))),r.a.createElement("button",{type:"button",onClick:a},"Adicionar Despesa"))}}]),n}(r.a.Component),C=n(13),x=n.n(C),k=n(18),w=function(){var e=Object(k.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return delete(n=e.sent).USDT,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){return{type:"FAIL",payload:e}},D=function(){return function(){var e=Object(k.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING"}),e.prev=1,e.next=4,w();case 4:n=e.sent,t({type:"SUCCESS",payload:Object.keys(n)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(S(e.t0));case 11:t({type:"LOADING"});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(k.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:a=t.sent,r=Object(v.a)(Object(v.a)({},e),{},{exchangeRates:a}),n({type:"ADD_EXPENSE",payload:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.expenses,n=e.deleteExp;return r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")),t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.value),r.a.createElement("td",null,e.exchangeRates[e.currency].name.split("/")[0]),r.a.createElement("td",null,parseFloat(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,parseFloat(e.exchangeRates[e.currency].ask*e.value).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button"},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return n(e)}},"Excluir")))})))}}]),n}(r.a.Component),A=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExp:function(t){return e(function(e){return{type:"DELETE_EXPENSE",payload:e}}(t))}}}))(R),L=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChanges=e.handleChanges.bind(Object(b.a)(e)),e.handleClick=e.handleClick.bind(Object(b.a)(e)),e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrencies)()}},{key:"handleChanges",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(d.a)({},n,a))}},{key:"handleClick",value:function(){var e=this.props,t=e.expenses,n=e.fetchExpenses,a=t.length;n(Object(v.a)(Object(v.a)({},this.state),{},{id:a}))}},{key:"render",value:function(){var e=this.props.currencies;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement(y,{onChange:this.handleChanges}),r.a.createElement(g,{onChange:this.handleChanges,currencies:e,onClick:this.handleClick}),r.a.createElement(A,null))}}]),n}(r.a.Component),T=Object(i.b)((function(e){return{emailGot:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses,exchangeRates:e.wallet.exchangeRates}}),(function(e){return{fetchCurrencies:function(){return e(D())},fetchExpenses:function(t){return e(F(t))}}}))(L),M=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/trybewallet",component:f}),r.a.createElement(m.a,{exact:!0,path:"/carteira",component:T}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(14),N=n(31),G=n(32),_={email:""},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EMAIL":return Object(v.a)(Object(v.a)({},e),{},{email:t.payload});default:return e}},U=n(27),X={currencies:[],expenses:[],loading:!1,error:""},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object(v.a)(Object(v.a)({},e),{},{loading:!e.loading});case"FAIL":return Object(v.a)(Object(v.a)({},e),{},{error:t.payload});case"SUCCESS":return Object(v.a)(Object(v.a)({},e),{},{currencies:t.payload});case"ADD_EXPENSE":return Object(v.a)(Object(v.a)({},e),{},{expenses:[].concat(Object(U.a)(e.expenses),[t.payload])});case"DELETE_EXPENSE":return Object(v.a)(Object(v.a)({},e),{},{expenses:Object(U.a)(e.expenses.filter((function(e){return e!==t.payload})))});default:return e}},V=Object(I.combineReducers)({user:P,wallet:B}),W=Object(I.createStore)(V,Object(N.composeWithDevTools)(Object(I.applyMiddleware)(G.a)));l.a.render(r.a.createElement(i.a,{store:W},r.a.createElement(o.a,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.743dd2dc.chunk.js.map